<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gueser</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <style>
        /* small local tweaks */
        body { background-color: #f8f9fa; transition: background-color 300ms ease, color 300ms ease; }
        .guess-card { max-width: 480px; margin: 2rem auto; }
        #feedback { min-height: 2.4rem; }

        /* Attempts block */
        .attempts-card { max-width: 160px; margin-left: auto; }

        /* Feedback variants */
        .feedback-low { background: rgba(13,110,253,0.08); border: 1px solid rgba(13,110,253,0.12); padding: .5rem .75rem; border-radius: .375rem; color: #084298; }
        .feedback-high { background: rgba(255,193,7,0.08); border: 1px solid rgba(255,193,7,0.12); padding: .5rem .75rem; border-radius: .375rem; color: #7a5200; }
        .feedback-correct { background: rgba(25,135,84,0.12); border: 1px solid rgba(25,135,84,0.18); padding: .5rem .75rem; border-radius: .375rem; color: #0f5132; }

        /* Win theme - whole page turns green */
        .win-theme { background: #bfffd3; color: #0b3d10; }
        .win-theme .guess-card { box-shadow: 0 8px 24px rgba(11,61,16,0.12); }
        .win-theme .btn-primary { background-color: #2f8b2f; border-color: #2f8b2f; }
    </style>
</head>

<body>
    <div class="container">
        <div class="card guess-card shadow-sm">
            <div class="card-body">
                <h1 class="card-title h4 mb-2">Guess the number</h1>
                <p class="card-text text-muted mb-3">Try to guess the number between 1 and 100!</p>

                <div class="mb-3">
                    <input type="number" id="guessInput" class="form-control" placeholder="Enter your guess" autofocus>
                </div>

                <div class="d-flex gap-2 mb-3">
                    <button id="submitGuess" class="btn btn-primary">Submit Guess</button>
                    <button id="newGame" class="btn btn-secondary">New Game</button>
                </div>

                <div class="mb-2">
                    <p id="feedback" class="mb-1 text-break"></p>
                    <p class="text-muted small mb-0">Attempts: <span id="attempts">0</span></p>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <script>
        let randomNumber = Math.floor(Math.random() * 100) + 1;
        const guessInput = document.getElementById('guessInput');
        const submitGuess = document.getElementById('submitGuess');
        const newGame = document.getElementById('newGame');
        const feedback = document.getElementById('feedback');

        const attemptsEl = document.getElementById('attempts');
        let attempts = 0;

        function setFeedback(message, variant) {
            // clear previous variant classes
            feedback.classList.remove('feedback-low', 'feedback-high', 'feedback-correct');
            if (variant === 'low') feedback.classList.add('feedback-low');
            if (variant === 'high') feedback.classList.add('feedback-high');
            if (variant === 'correct') feedback.classList.add('feedback-correct');
            feedback.innerHTML = message;
        }

        function handleGuess() {
            const userGuess = parseInt(guessInput.value, 10);
            if (isNaN(userGuess) || userGuess < 1 || userGuess > 100) {
                setFeedback('Please enter a valid number between 1 and 100.', 'high');
                return;
            }

            // Count only valid guesses
            attempts += 1;
            attemptsEl.textContent = attempts;

            if (userGuess < randomNumber) {
                setFeedback(`The number <strong>${userGuess}</strong> is<br/>too low! Try guessing higher.`, 'low');
                // visual hint: indicate direction on input
                guessInput.classList.remove('is-invalid');
                guessInput.classList.add('border-primary');
            } else if (userGuess > randomNumber) {
                setFeedback(`The number <strong>${userGuess}</strong> is<br/>too high! Try guessing lower.`, 'high');
                guessInput.classList.remove('border-primary');
                guessInput.classList.add('is-invalid');
            } else {
                setFeedback('Congratulations! You guessed the number!', 'correct');
                // Apply win theme to page
                document.body.classList.add('win-theme');
                // Disable further input after success and show positive styles
                guessInput.disabled = true;
                submitGuess.disabled = true;
                guessInput.classList.remove('is-invalid', 'border-primary');
                guessInput.classList.add('bg-success', 'text-white');
                return;
            }
            guessInput.value = '';
        }

        submitGuess.addEventListener('click', handleGuess);

        // Reset the game to start a new round
        function resetGame() {
            randomNumber = Math.floor(Math.random() * 100) + 1;
            console.log("New random number: ", randomNumber);
            attempts = 0;
            attemptsEl.textContent = attempts;
            feedback.textContent = '';
            feedback.classList.remove('feedback-low', 'feedback-high', 'feedback-correct');
            // remove win theme
            document.body.classList.remove('win-theme');
            guessInput.classList.remove('bg-success', 'text-white', 'is-invalid', 'border-primary');
            guessInput.value = '';
            guessInput.disabled = false;
            guessInput.style.backgroundColor = '';
            submitGuess.style.backgroundColor = '';
            submitGuess.disabled = false;
            guessInput.focus();
        }

        newGame.addEventListener('click', resetGame);

        // Allow pressing Enter in the input to submit the guess
        guessInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                handleGuess();
            }
        });
    </script>
</body>

</html>